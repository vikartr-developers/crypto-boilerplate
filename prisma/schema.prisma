generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id                           String              @id @default(uuid()) @map("_id")
  name                         String
  email                        String              @unique
  password                     String
  isEmailVerified              Boolean             @default(false)
  emailVerificationToken       String?
  emailVerificationTokenexpiry DateTime?
  createdAt                    DateTime?           @default(now())
  updatedAt                    DateTime?           @updatedAt
  userRoles                    UserRole[]
}

model Role {
  id          String    @id @default(uuid()) @map("_id")
  name        String    @unique
  description String?
  createdAt   DateTime? @default(now())
  updatedAt   DateTime  @updatedAt

  userroles       UserRole[]
  rolePermissions RolePermission[]
}

model Permission {
  id          String    @id @default(uuid()) @map("_id")
  name        String    @unique
  description String?
  createdAt   DateTime? @default(now())
  updatedAt   DateTime? @updatedAt

  rolePermissions RolePermission[]
}

model UserRole {
  id        String    @id @default(uuid()) @map("_id")
  userId    String
  roleId    String
  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt

  user User @relation(fields: [userId], references: [id])
  role Role @relation(fields: [roleId], references: [id])
}

model RolePermission {
  id           String    @id @default(uuid()) @map("_id")
  roleId       String
  permissionId String
  createdAt    DateTime? @default(now())
  updatedAt    DateTime? @updatedAt

  role       Role       @relation(fields: [roleId], references: [id])
  permission Permission @relation(fields: [permissionId], references: [id])
}



model Script {
  id          String   @id @default(uuid()) @map("_id")
  symbol      String   @unique             
  baseAsset   String                       
  quoteAsset  String                       
  status      String                        
  createdAt   DateTime? @default(now())
  updatedAt   DateTime? @updatedAt
}
